<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>QuickFIX/J Installation</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="header">
<h1>QuickFIX/J User Manual</h1>
</div>
<h2>Installation and Building the Code.</h2>
<h3><a name="dependencies"></a>Runtime Dependencies</h3>
<h4>Java Virtual Machine:</h4>
<p>JVM compatible with Sun JRE Java 1.4.x or higher.</p>

<h4>Required run-time libraries:</h4>
<table cellspacing="0">
  <tr>
    <th>Library</th>
    <th>Description</th>
  </tr>
  <tr>
    <td nowrap="nowrap">quickfixj.jar</td>
    <td>Main QuickFIX/J library</td>
  </tr>
  <tr>
    <td nowrap="nowrap">mina-0.8.2.jar</td>
    <td>Socket handling (Java NIO)</td>
  </tr>
  <tr>
    <td nowrap="nowrap">slf4j-jdk14-1.0-rc5.jar</td>
    <td>SLF4J library for JDK 1.4+ logging.</td>
  </tr>
  <tr>
    <td nowrap="nowrap">backport-util-concurrent-2.1.jar</td>
    <td>Java 5 Synchronization and threading library compatible with JDK 1.4.</td>
  </tr>
</table>
<h4>Optional run-time libraries:</h4>
<table cellspacing="0">
  <tr>
    <th>Library</th>
    <th>Description</th>
  </tr>
  <tr>
    <td nowrap="nowrap">log4j-1.2.4.jar</td>
    <td>If Log4J logging is desired. The JDK logging is the default.</td>
  </tr>
  <tr>
    <td nowrap="nowrap">slf4j-log4j12-1.0-rc5.jar</td>
    <td>Use this JAR file instead of slf4j-jdk14-1.0-rc5.jar if you want to
	use Log4J logging.</td>
  </tr>
  <tr>
    <td nowrap="nowrap">mysql-connector-java-3.1.12-bin.jar </td>
    <td>If MySQL message storage or logging is used or include the appropriate
    JAR file for whatever other JDBC data you are using.</td>
  </tr>
  <tr>
    <td nowrap="nowrap">sleepycat-je_2.1.30.jar</td>
    <td>Needed if the SleepyCat JE message store is used.</td>
  </tr>
</table>
<h2><a name="build"></a>Building QuickFIX/J</h2>
<p><em>These instructions are for developers who don't want
    to use the prebuilt binaries or are intending to modify and rebuild the QuickFIX/J
    code. </em>If you are building the code from the command line you'll need
    to download and install Ant (version 1.6.3 or newer). If you are building from
    Eclipse, Ant
is included.</p>
<ol>
  <li>Check out the code from CVS using anonymous access.
      See the <a href="http://sourceforge.net/cvs/?group_id=37535">anonymous
      CVS directions</a> at Source Forge for more details on access. You will
      want to checkout the <code>quickfixj</code> module (notice the 'j'
      at the end).</li>
  <li>Change directory to the top-level directory of the checked out code. You
    should see a build.xml file.</li>
  <li>Run <code>ant jar</code> to build the QuickFIX/J and examples jar files.
    This will also generate all the FIX message-related code for the various
    FIX versions.</li>
</ol>
<h3>Eclipse IDE support:</h3>
<p>The QuickFIX/J developers also use Eclipse to build the software. There is
  a project definition in the top-level directory of the checked out CVS workspace.
  In fact, if you are an experienced Eclipse developer you may want to check
   out the project directly from Eclipse. A message generator item will be present
	on the external tools menu for generating Java message-related classes. If you are seeing
  compile errors related to message classes, use this tool to generate the classes.</p>
<h2><a name="mysql"></a>Setting up the MySQL database</h2>
<p> Everything needed to generate your MySQL database is in the <code>etc/sql/mysql</code> directory.
  Here, there are the script and batch files <code>create_mysql.sh</code> and <code>create_mysql.bat</code>.
  These scripts will work on a newly installed mysql database with default permisions.
  The scripts will try to generate the database using the root MySQL account
  with no password. If you need to use a different account or need a password,
  you will have to edit the script. To select a different user, simply change
  'root' to another user. To add a password, use pass the -p option after the
username. Similar scripts are provided for MSSQL and PostgreSQL.</p>
<h2><a name="testing"></a>Testing QuickFIX/J</h2>
<p> The development of QuickFIX has been driven by a suite of functional acceptance
  tests and unit tests. We have been working incrementally, functional test by
  functional test, writing the unit tests before the code. If these tests pass,
we're reasonably confident that the engine works as intended.</p>
<p>The developer unit tests are written as JUnit tests and test the code directly.
  The functional acceptance tests are scripted FIX messages that are
  pumped
  into a running FIX server. Most of these tests are based off of the FIX Session-level
  Test Cases and Expected Behaviors document.</p>
<p>The unit tests can be run by running the <code>test.unit</code> target
  in the Ant build.xml file. If you are using Eclipse, you can right-click on
  the quickfix package in the test subdirectory and select the &quot;Run as... -&gt;
  JUnit Test&quot; option. This should locate all the unit tests in the package hierarchy
  and run them in the integrated JUnit test runner.</p>
<h3>Acceptance Tests</h3>
<p> QuickFIX/J also has a scriptable test runner that comes with a series of
  automated acceptance test. The basic tests that come with QuickFIX are based
  off of the <a href="http://www.fixprotocol.org/ORGANIZATIONS/928202077/FIX_TestCase_SessionLevel20010710.doc"> FIX
  Session-level Test Cases and Expected Behaviors</a> document produced by the
  FIX protocol organization. These tests verify that QuickFIX adheres to the
  FIX specifications. The automated nature of these tests guarantees that future
releases of QuickFIX will not break any current functionality. </p>
<p> Perhaps even more importantly is how these test are used to drive the development
  of QuickFIX. Before a line of code is written in support of a protocol feature,
  one of these tests is written. This test first approach sets up a goal for
  developers who will have objective verification that they correctly implemented
  the standard. </p>
<p>To run the acceptance tests, use the <code>test.acceptance</code> Ant
  target. If you are using Eclipse, right-click on the <code>quickfix.test.acceptance.AcceptanceTestSuite</code>  class
  and select the &quot;Run as... -&gt; JUnit Test&quot; option. This will start an acceptance
  test program with an embedded QuickFIX/J server, load the AT definition files
  and convert them to JUnit tests, and run those tests in the embedded JUnit
  test view.</p>
<h4>Writing your own Acceptance Test Scripts</h4>
<p> Below is an example of a test script that tests the engines behavior when
  it receives a NewSeqNo value that is less than the expected MsgSeqNum. </p>

<pre class="code">
  iCONNECT
  I8=FIX.4.235=A34=149=TW52=&lt;time&gt;56=ISLD98=0108=30
  E8=FIX.4.29=5735=A34=149=ISLD52=00000000-00:00:0056=TW98=0108=3010=0

  # sequence reset without gap fill flag (default to N)
  I8=FIX.4.235=434=049=TW52=&lt;time&gt;56=ISLD36=1
  E8=FIX.4.29=11235=334=249=ISLD52=00000000-00:00:0056=TW45=058=Value is incorrect (out of range) for this tag372=4373=510=0

  I8=FIX.4.235=134=249=TW52=&lt;time&gt;56=ISLD112=HELLO
  E8=FIX.4.29=5535=034=349=ISLD52=00000000-00:00:0056=TW112=HELLO10=0

  # sequence reset without gap fill flag (default to N)
  I8=FIX.4.235=434=049=TW52=&lt;time&gt;56=ISLD36=1123=N
  E8=FIX.4.29=11235=334=449=ISLD52=00000000-00:00:0056=TW45=058=Value is incorrect (out of range) for this tag372=4373=510=0

  I8=FIX.4.235=134=349=TW52=&lt;time&gt;56=ISLD112=HELLO
  E8=FIX.4.29=5535=034=549=ISLD52=00000000-00:00:0056=TW112=HELLO10=0
  iDISCONNECT
  </pre>
In these script there are two types of commands, action commands and messages
commands. Action commands begin with lowercase letters while message command
begin with uppercase letters.
<h4>Action Commands</h4>
<b>i&lt;ACTION&gt;</b> - initiates an action<br>
<b>e&lt;ACTION&gt;</b> - expect (wait for) an action<br>
<br>
Supported actions are:<br>
<br>
<b>iCONNECT</b> - initiate connection to a FIX acceptor<br>
<b>eCONNECT</b> - expect a connection from a FIX initiator<br>
<b>iDISCONNECT</b> - initiate a disconnect<br>
<b>eDISCONNECT</b> - expect a disconnect<br>
<br>
<h3>Message Commands</h3>
<b>I&lt;MESSAGE&gt;</b> - initiate (send) a message<br>
<b>E&lt;MESSAGE&gt;</b> - expect (wait for) a message<br>
<br>
<p> When using the <b>I</b> command, you do not need to add the <i>Length(9)</i> or
  the <i>CheckSum(10)</i> fields, they will be added for you with the correct
  values in the appropriate locations. The only time you would add these fields
  is if you intentionally wish to make them incorrect. </p>
<p> The <b>I</b> command also provides a TIME macros for fields. By setting a
  field equal to &lt;TIME&gt;, the current system time will be placed in the
  field. (i.e. 52=&lt;time&gt;). You can also use offsets such as 52=&lt;TIME-120> or
  52=&lt;TIME+15> in order to set the time plus or minus some seconds from the
  current time. </p>
<p>The <b>E</b> command verifies that you have received the correct message.
  This command will compare the values of each field to make sure they are correct.
  Some fields cannot be verified deterministically before run-time such as the
  SendingTime and CheckSum fields. These fields can be added to the <i>fields.fmt</i> file
  where a regular expression can be defined to at least verify the field is in
  the correct format. For example: </p>
  <p>
10=\d{3}, checksum must be exactly three digits<br>
52=\d{8}-\d{2}:\d{2}:\d{2}, sending time must be in the form of DDDDDDDD-DD:DD:DD
where D is a digit.
</p>

<div class="footer">More information at <a href="http://www.quickfixj.org/">www.quickfixj.org</a></div>

</body>
</html>
